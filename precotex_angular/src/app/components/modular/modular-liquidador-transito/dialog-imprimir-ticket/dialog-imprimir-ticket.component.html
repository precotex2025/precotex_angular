<div class="container">
    <!-- ventana nro 4 - historial -->
    <div class="grid-container">

        <div class="title">GENERAR TICKET - OP: {{this.data.datos.Cod_OrdPro}} - COLOR: {{this.data.datos.Color}}

            <span aria-label="Close" class="cerrar" mat-dialog-close aria-hidden="true">&times;</span>
        </div>

        <div class="container-cuerpo">
            <div class="row">
                <div class="col-12">
                    <button mat-flat-button color="primary" class="button-warning"
                        (click)="getGeneraTickets()"><mat-icon>print</mat-icon> Imprimir Tickets </button>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <mat-card>
                        <mat-card-content>
                            <div class="row">
                                <div class="col-md-12">
                                    <table mat-table class="mat-elevation-z8" #table [dataSource]="dataSource">

                                        <ng-container matColumnDef="PAQUETE">
                                            <th mat-header-cell *matHeaderCellDef> PAQUETE </th>
                                            <td mat-cell *matCellDef="let data_det"> {{data_det.PAQUETE}}</td>
                                        </ng-container>

                                        <ng-container matColumnDef="PRESENTACIÓN">
                                            <th mat-header-cell *matHeaderCellDef> PRESENTACIÓN </th>
                                            <td mat-cell *matCellDef="let data_det"> {{ data_det['PRESENTACIÓN'] }}</td>
                                        </ng-container>
                                        <ng-container matColumnDef="TALLA">
                                            <th mat-header-cell *matHeaderCellDef> TALLA </th>
                                            <td mat-cell *matCellDef="let data_det"> {{ data_det.TALLA }}</td>
                                        </ng-container>
                                        <ng-container matColumnDef="PRENDAS">
                                            <th mat-header-cell *matHeaderCellDef> PRENDAS </th>
                                            <td mat-cell *matCellDef="let data_det"> {{ data_det.PRENDAS }}</td>
                                        </ng-container>
                                        <ng-container matColumnDef="KEY">
                                            <th mat-header-cell *matHeaderCellDef> KEY </th>
                                            <td mat-cell *matCellDef="let data_det"> {{ data_det.KEY }}
                                            </td>
                                        </ng-container>
                                        <ng-container matColumnDef="POSICION">
                                            <th mat-header-cell *matHeaderCellDef> POSICION </th>
                                            <td mat-cell *matCellDef="let data_det"> {{ data_det.POSICION }}</td>
                                        </ng-container>
                                        <ng-container matColumnDef="SECTOR">
                                            <th mat-header-cell *matHeaderCellDef> SECTOR </th>
                                            <td mat-cell *matCellDef="let data_det"> {{ data_det.SECTOR }}</td>
                                        </ng-container>
                                        <ng-container matColumnDef="IMPRESO">
                                            <th mat-header-cell *matHeaderCellDef> IMPRESO </th>
                                            <td mat-cell *matCellDef="let data_det">
                                                <mat-checkbox class="example-margin"
                                                    (change)="changeImpreso($event, data_det)"
                                                    [disabled]="data_det.IMPRESO == '1'"
                                                    [checked]="data_det.IMPRESO == '1'"></mat-checkbox>
                                            </td>
                                        </ng-container>
                                        <ng-container matColumnDef="USUARIO">
                                            <th mat-header-cell *matHeaderCellDef> USUARIO </th>
                                            <td mat-cell *matCellDef="let data_det"> {{ data_det.USUARIO }}</td>
                                        </ng-container>
                                        <ng-container matColumnDef="FECHA">
                                            <th mat-header-cell *matHeaderCellDef> FECHA </th>
                                            <td mat-cell *matCellDef="let data_det"> {{ data_det.FECHA['date'] |
                                                date:'dd/MM/Y' }}</td>
                                        </ng-container>


                                        <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
                                        <tr mat-row *matRowDef="let row; columns: columnsToDisplay;">
                                        </tr>
                                        <tr class="mat-row" *matNoDataRow>
                                            <td class="mat-cell" colspan="4">Aún no has agregado Registros</td>
                                        </tr>

                                    </table>

                                </div>
                            </div>
                        </mat-card-content>
                    </mat-card>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-container *ngIf="imprimirTicket">
    <div style="display:flex; position:absolute; bottom: 1000px;" id="ticket">
        <div class="total2">
            <ng-container *ngFor="let item of dataTickets; let i = index">
                <div class="total2">
                    <div class="caja" style="width:200px;font-size:9px;">
                        <div class="flex">
                            <div class="print" style="width:100px;font-size:9px">
                                <div style="text-align: center;">
                                    {{item.NRO_OP}} - Mov: {{item.Num_Movstk}}<br>
                                </div>
                            </div>
                            <div class="print" style="width:100px;font-size:9px">
                                <div style="text-align: center;">
                                    Tarif: {{item.COD_TARIFADO}} <br>
                                </div>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="print" style="width:100px;font-size:9px">
                                <div style="text-align: center;">
                                    Pr/Hr: {{item.PR_HR2}}<br>
                                </div>
                            </div>
                            <div class="print" style="width:100px;font-size:9px">
                                <div style="text-align: center;">
                                    {{organico}}<br>
                                </div>
                            </div>
                            <div class="print" style="width:100px;font-size:9px">
                                <div style="text-align: center;">
                                    Prds: {{item.NRO_PR}} <br>
                                </div>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="print" style="width:100px;font-size:9px">
                                <div style="text-align: center;">
                                    {{item.COLOR2}}
                                </div>
                            </div>
                            <div class="print" style="width:100px;font-size:9px">
                                <div style="text-align: center;">
                                    Paq: {{item.COD_PAQ}}
                                </div>
                            </div>
                        </div>
                        <div style="width:100%; text-align:center;">
                            <span>{{item.DES_OPE2}}</span>
                        </div>
                        <div class="barra">
                            <div id="print-section">
                                <svg class="barcode" id="barcode{{i}}" viewBox="0 0 273 200"></svg>
                            </div>
                        </div>
                    </div>
                    <div class="caja" style="width:200px;font-size:9px;">
                        <div class="flex">
                            <div class="print" style="width:100px;font-size:9px">
                                <div style="text-align: center;">
                                    {{item.NRO_OP}}<br>
                                </div>
                            </div>
                            <div class="print" style="width:100px;font-size:9px">
                                <div style="text-align: center;">
                                    Tarif: {{item.COD_TARIFADO}} <br>
                                </div>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="print" style="width:100px;font-size:9px">
                                <div style="text-align: center;">
                                    Pr/Hr: {{item.PR_HR3}}<br>
                                </div>
                            </div>
                            <div class="print" style="width:100px;font-size:9px">
                                <div style="text-align: center;">
                                    {{organico}}<br>
                                </div>
                            </div>
                            <div class="print" style="width:100px;font-size:9px">
                                <div style="text-align: center;">
                                    Prds: {{item.NRO_PR}} <br>
                                </div>
                            </div>
                        </div>
                        <div class="flex">
                            <div class="print" style="width:100px;font-size:9px">
                                <div style="text-align: center;">
                                    {{item.COLOR3}}
                                </div>
                            </div>
                            <div class="print" style="width:100px;font-size:9px">
                                <div style="text-align: center;">
                                    Paq: {{item.COD_PAQ}}
                                </div>
                            </div>
                        </div>
                        <div style="width:100%; text-align:center;">
                            <span>{{item.DES_OPE3}}</span>
                        </div>
                        <div class="barra">
                            <div id="print-section">
                                <svg class="barcode" id="barcode{{i}}" viewBox="0 0 273 200"></svg>
                            </div>
                        </div>
                    </div>

                </div>
            </ng-container>
        </div>
    </div>
</ng-container>





<ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="default" type="ball-spin">
    <p style="color: white; text-align: center; ">Cargando... </p>
</ngx-spinner>