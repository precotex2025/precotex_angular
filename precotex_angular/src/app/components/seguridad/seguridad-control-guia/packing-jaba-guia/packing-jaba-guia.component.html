<div class="container">
    <!-- ventana nro 3 - salida -->
    <div class="grid-container">

        <div class="title">Crear Packing Lista Jaba - Sede: {{this.des_planta}}</div>

        <form class="container-cuerpo" [formGroup]="formulario">


            <div class="container-cuerpo-fila1">
                <button type="button" class="button-trabajador" mat-flat-button color="primary" [disabled]="mostrarCreacion"
                    (click)="crearPackingJaba()"> Crear Packing de Salida Jabas
                    <mat-icon aria-label=" person">check_circle</mat-icon>
                </button>
                <button type="button" class="button-registrar" mat-flat-button color="primary"
                    (click)="historialPackingJaba()"> Historial Packing de Salida Jabas
                    <mat-icon aria-label=" person">assignment</mat-icon>
                </button>
                <button type="button" class="button-cancelar" mat-flat-button color="primary"
                    [routerLink]="['/SeguridadControlGuia']">
                    <mat-icon aria-label="person">highlight_off
                    </mat-icon>Cancelar
                </button>
                <div class="num-packing" *ngIf="mostrarCreacion">     
                    <span>N째 Paking: {{ultimoNumPaking}}</span>
                </div>
            </div>
           
            <div class="container-cuerpo-fila7" *ngIf="mostrarCreacion">
                
                <div class="row row-right">
                    <mat-form-field class="fila1-buscar-jabas">
                        <mat-label>Buscador de Jabas</mat-label> 
                        <input matInput (input)="filtrarDatos($event)" formControlName="BuscarJabas" #myInput/>
                    </mat-form-field>
                    <button type="button" class="button-limpiar-jabas" mat-flat-button
                    (click)="limpiarBuscarJabas()" title="Borra buscador de jabas">
                    <mat-icon aria-label=" person">delete</mat-icon>                
                    </button>
                    <button type="button" class="button-limpiar-jabas" mat-flat-button
                    (click)="refreshJabas()" title="Refrescar">
                    <mat-icon aria-label=" person">refresh</mat-icon>                
                    </button>
                </div>
                <div class="row">
                    <mat-form-field>
                        <mat-label>N째 de Jaba</mat-label>
                        <input matInput type="text" formControlName="Codigo_Barra" maxlength="8" (input)="onJabaAutomatico()">
                    </mat-form-field>
                    <button mat-flat-button color="primary" (click)="agregarJaba()">Agregar <mat-icon>add</mat-icon></button>
                </div>

                <table mat-table class="mat-elevation-z8" #table [dataSource]="datosFiltrados.length > 0 ? datosFiltrados : dataSource">

                    <ng-container matColumnDef="Codigo_Barra">
                        <th mat-header-cell *matHeaderCellDef> C처digo </th>
                        <td mat-cell *matCellDef="let data_det"> {{data_det.Codigo_Barra}} </td>
                    </ng-container>

                    <ng-container matColumnDef="Ubicacion">
                        <th mat-header-cell *matHeaderCellDef> Ubicaci처n </th>
                        <td mat-cell *matCellDef="let data_det"> {{ data_det.Ubicacion }}</td>
                    </ng-container>

                    <ng-container matColumnDef="OK">
                        <th mat-header-cell *matHeaderCellDef> OK </th>
                        <td mat-cell *matCellDef="let data_det" style="font-weight: bold;">
                            <mat-checkbox class="example-margin" [checked]="data_det['OK'] == 'OK'"
                            (change)="changeRadio($event, data_det.Codigo_Barra, 'OK')" name="radio{{data_det.Codigo_Barra}}"
                            value="OK"></mat-checkbox>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="RL">
                        <th mat-header-cell *matHeaderCellDef> RL </th>
                        <td mat-cell *matCellDef="let data_det">
                            <mat-checkbox class="example-margin" [checked]="data_det['RL'] == 'RL'"
                                (change)="changeRadio($event, data_det.Codigo_Barra, 'RL')" name="radio{{data_det.Codigo_Barra}}"
                                value="RL"></mat-checkbox>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="2RL">
                        <th mat-header-cell *matHeaderCellDef> 2RL </th>
                        <td mat-cell *matCellDef="let data_det">
                            <mat-checkbox class="example-margin" [checked]="data_det['2RL'] == '2RL'"
                            (change)="changeRadio($event, data_det.Codigo_Barra, '2RL')" name="radio{{data_det.Codigo_Barra}}"
                            value="2RL"></mat-checkbox>
                        </td>

                    </ng-container>
                    <ng-container matColumnDef="RT">
                        <th mat-header-cell *matHeaderCellDef> RT </th>
                        <td mat-cell *matCellDef="let data_det">
                            <mat-checkbox class="example-margin" [checked]="data_det['RT'] == 'RT'"
                                (change)="changeRadio($event, data_det.Codigo_Barra, 'RT')" name="radio{{data_det.Codigo_Barra}}"
                                value="RT"></mat-checkbox>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="2RT">
                        <th mat-header-cell *matHeaderCellDef> 2RT </th>
                        <td mat-cell *matCellDef="let data_det">
                            <mat-checkbox class="example-margin" [checked]="data_det['2RT'] == '2RT'"
                                (change)="changeRadio($event, data_det.Codigo_Barra, '2RT')" name="radio{{data_det.Codigo_Barra}}"
                                value="2RT"></mat-checkbox>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="G">
                        <th mat-header-cell *matHeaderCellDef> G </th>
                        <td mat-cell *matCellDef="let data_det">
                            <mat-checkbox class="example-margin" [checked]="data_det['G'] == 'G'"
                                (change)="changeRadio($event, data_det.Codigo_Barra, 'G')" name="radio{{data_det.Codigo_Barra}}"
                                value="G"></mat-checkbox>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="OUT">
                        <th mat-header-cell *matHeaderCellDef> OUT </th>
                        <td mat-cell *matCellDef="let data_det">
                            <mat-checkbox class="example-margin" [checked]="data_det['OUT'] == 'OUT'"
                                (change)="changeRadio($event, data_det.Codigo_Barra, 'OUT')" name="radio{{data_det.Codigo_Barra}}"
                                value="OUT"></mat-checkbox>
                        </td>
                    </ng-container> 
                    <ng-container matColumnDef="RO">
                        <th mat-header-cell *matHeaderCellDef> RO </th>
                        <td mat-cell *matCellDef="let data_det">
                            <mat-checkbox #checkbox class="example-margin" [checked]="data_det['RO'] == 'RO'"
                                (change)="changeRadio($event, data_det.Codigo_Barra, 'RO')" name="radio{{data_det.Codigo_Barra}}"
                                value="RO"></mat-checkbox>
                        </td>
                    </ng-container> 
                    <tr mat-header-row *matHeaderRowDef="columnsToDisplay" class="fijar-row" ></tr>
                    <tr mat-row *matRowDef="let row; columns: columnsToDisplay;" [ngClass]="{ 'seleccionar-row': isSeleccionadaFila(row) }" (click)="seleccionarFila(row)"></tr>
                </table>

                <h4><b>Leyenda: </b></h4>
                <table class="tables">
                    <thead>
                        <th>OK</th>
                        <th>RL</th>
                        <th>2RL</th>
                        <th>RT</th>
                        <th>2RT</th>
                        <th>G</th>
                        <th>OUT</th>
                        <th>RO</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>JABA BUEN ESTADO</td>
                            <td>JABA RAJADA LATERAL</td>
                            <td>JABA DOBLE RAJADA LATERAL</td>
                            <td>JABA RAJADA TAPA</td>
                            <td>JABA DOBLE RAJADA</td>
                            <td>JABA GOLPEADA</td>
                            <td>JABA INSERVIBLE</td>
                            <td>JABA ROTA</td>
                        </tr>
                    </tbody>
                </table>

            </div>

            <div class="container-cuerpo-foot" *ngIf="mostrarCreacion">

                <!-- <div class="col-md-3">
                    <input type="file"  (change)="onChangeFile($event)" autocomplete="off" accept="image/*"
                        class="form-control d-none" #inputFile>
                    <button (click)="inputFile.click()" type="button" class="button-registrar" 
                        mat-flat-button>Foto 1 <mat-icon>upload</mat-icon></button>
                </div>
                <div class="col-md-3"  *ngIf="file != undefined && file != null">
                    <span *ngIf="file != undefined && file != null" class="text-success">Archivo Seleccionado</span><br>
                    <button *ngIf="file != undefined && file != null" (click)="eliminarArchivo()" mat-flat-button color="warn"> Eliminar <mat-icon>delete</mat-icon></button>
                </div> -->

                <button type="button" class="button-registrar" mat-flat-button color="primary" (click)="Guardar()">
                    <mat-icon aria-label="person">check_circle_outline
                    </mat-icon>Registrar
                </button>
                <button type="button" class="button-cancelar" mat-flat-button color="primary"
                    [routerLink]="['/SeguridadControlGuiaAccion']">
                    <mat-icon aria-label="person">highlight_off
                    </mat-icon>Cancelar
                </button>
            </div>
        </form>
    </div>

</div>